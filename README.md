外部排序（external-sort）
====

# 1 问题介绍

外部排序指的是大文件的排序，即待排序的记录存储在外存储器上，待排序的文件无法一次装入内存，需要在内存和外部存储器之间进行多次数据交换，以达到排序整个文件的目的。外部排序最常用的算法是多路归并排序，即将原文件分解成多个能够一次性装入内存的部分，分别把每一部分调入内存完成排序。然后，对已经排序的子文件进行多路归并排序。


本文需要实现一个可以对“海量”浮点数进行外部排序的程序Sort.exe——读取文件路径和其他配置信息，将“输入文本文件”里面的浮点数从小到大排序，然后输出到另外一个“输出文本文件” 中。完成后，用户双击Sort.exe，程序即自动加载同目录下的Sort.param，而后开始运行。Sort.param里面放着“输入”和“输出”的文本文件（如.txt）的路径及其他信息。


最终提交：（1）源码。（2）Windows系统下的完整可运行程序。（3）一份测试报告。

# 2 报告摘要

本文提出了一种基于败方树算法的多路归并外排序程序设计和实现方案。经过数据测试，可以在200秒内对2.5亿浮点数进行排序和输出。首先，本文给出了程序的整体设计架构。其次，提出了一些生成大规模随机数的算法用于生成测试集，比较了二进制文件分块读取、文件流读取等不同读写方式的效率和数据有效性等常见问题。然后，讨论不同排序算法在本问题上的优点和局限性，并给出了多路归并外排序算法的实现细节。最后，本文讨论了程序的结果和未来改进的方向。

# 3 代码实现框架

* Sort.cpp 对数据进行排序。
* generate.cpp 快速产生大量的随机数据进行测试（随机加入噪声）。
* number_judge.h 读入数据有效性确认，精度确认。
* 报告.pdf 实验测试报告
